// 백준 16439 : 치킨치킨치킨
#include <vector>
#include <string>
#include <iostream>

using namespace std;

int N, M; // N : 고리 회원의 수, M : 치킨 종류의 수
int preference[31][31]; // 각 회원의 치킨 선호도
vector<int> choice(3);
int answer = 0;

void comb(int depth, int next) {
	if (depth == 3) {
		int tmp_total = 0;
		for (int i = 1; i <= N; i++) {
			int tmp_max = 0;
			for (int chicken : choice) {
				if (tmp_max < preference[i][chicken]) tmp_max = preference[i][chicken];

			}
			tmp_total += tmp_max;
		}
		if (answer < tmp_total) answer = tmp_total;
		return;
	}

	for (int i = next; i <= M; i++) {
		choice[depth] = i;
		comb(depth + 1, i + 1);
	}
}

int main() {
	cin >> N >> M;

	for (int i = 1; i <= N; i++) {
		for (int j = 1; j <= M; j++) {
			cin >> preference[i][j];
		}
	}

	comb(0, 1);

	cout << answer << '\n';
}